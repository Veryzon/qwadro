AfxAttachDebugTerminal()
      ::::::::  :::       :::     :::     :::::::::  :::::::::   ::::::::      
     :+:    :+: :+:       :+:   :+: :+:   :+:    :+: :+:    :+: :+:    :+:     
     +:+    +:+ +:+       +:+  +:+   +:+  +:+    +:+ +:+    +:+ +:+    +:+     
     +#+    +:+ +#+  +:+  +#+ +#++:++#++: +#+    +:+ +#++:++#:  +#+    +:+     
     +#+  # +#+ +#+ +#+#+ +#+ +#+     +#+ +#+    +#+ +#+    +#+ +#+    +#+     
     #+#   +#+   #+#+# #+#+#  #+#     #+# #+#    #+# #+#    #+# #+#    #+#     
      ###### ###  ###   ###   ###     ### #########  ###    ###  ########      
                                                                               
              Q W A D R O   E X E C U T I O N   E C O S Y S T E M              
                                                                               
                               Public Test Build                               
                   (c) 2017 SIGMA, Engineering In Technology                   
                                www.sigmaco.org                                
                                                                               
Booting up Qwadro Execution Ecosystem...
Providing... Qwadro Execution Ecosystem
afxConfig.c:216
1: Section 'BasedOn="E:\qwadro\afx"' missing ']' operator.
Providing... Thread Execution Unit
Entering the Thread Execution Environment 6764
Providing... Memory Management Unit
Providing... Thread
Providing... Device
Providing... Autonomous Service
Providing... Codec
Providing... String Catalog
Providing... File System
Providing... Stream
Providing... Archive
Providing... Executable & Linkable Module
Providing... Installable Client Driver
Providing... Human Input Device : Device
Providing... Keyboard : Human Input Device
Providing... Mouse : Human Input Device
Providing... Controller : Human Input Device
afxSystem_w32.c:518
Memory page size: 4096
afxSystem_w32.c:519
Logical processor count: 1
Mounting file system... <.>('E:\qwadro\afx\\\'),5
Mounting file system... <system>('E:\qwadro\afx\\system\'),5
Mounting file system... <system>('E:\qwadro\afx\\system32\'),7
Mounting file system... <system>('E:\qwadro\afx\\system32d\'),7
Loading executable... <system/e2coree.dll>
Acquiring keyboard at port 0
Setting up the Qwadro Sound System...
Loading executable... <e2sound.dll>
Providing... SIGMA Sound System
Providing... Sound Bridge : Thread Execution Unit
Providing... Sound Thread : Thread
Providing... Sound Device : Device
Setting up the Qwadro Draw System...
Loading executable... <e2draw.dll>
Providing... SIGMA Draw System
Providing... Draw Bridge : Thread Execution Unit
Providing... Draw Thread : Thread
Providing... Draw Device : Device
Installing client driver <oal4d.inf>...
afxIcd.c:128
Installable client driver <oal4d.inf> discovered.
	Product: 
	Version: 0.0.0
	Description: 
	Vendor: 
	Website: 
	
afxIcd.c:134
Loading ICD <oal4d.inf> executable and linkable file <oal4d.dll>...
Loading executable... <oal4d.dll>
Created. (mtx)00598e00
Providing... Sound Context
0  - Generic Software
Listing devices available with ALC_ENUMERATE_ALL_EXT
0  - Generic Software on Alto-falantes (VIA HD Audio(Compatible))
1  - Generic Software on Headphone (VIA HD Audio(Compatible))
Listing available capture devices:
0  - Mixagem estéreo (VIA HD Audio(C
1  - Microfone (VIA HD Audio(Compati
Opening file... <system/qwadroDeepNote>('E:\qwadro\afx\\system\/qwadroDeepNote'),1
afxSoundSystem.c:301
The audience is listening
Installing client driver <sgl4d.inf>...
afxIcd.c:128
Installable client driver <sgl4d.inf> discovered.
	Product: SIGMA GL/2
	Version: 0.0.0
	Description: SIGMA-engineered continuously integrated OpenGL/Vulkan Video Graphics Infrastructure
	Vendor: SIGMA Technology Group
	Website: www.sigmaco.org
	
afxIcd.c:134
Loading ICD <sgl4d.inf> executable and linkable file <sgl4d.dll>...
Loading executable... <sgl4d.dll>
Created. (mtx)005f0ecc
Providing... Draw Script
Providing... Draw Queue
Providing... Draw Context
Providing... Draw Output
Providing... Draw Input
Listing mem available display devices...

#0 = Intel(R) HD Graphics (\\.\DISPLAY1) 8080005
#1 = RDPDD Chained DD (\\.\DISPLAYV1) 200008
#2 = RDP Encoder Mirror Driver (\\.\DISPLAYV2) 200008
#3 = RDP Reflector Display Driver (\\.\DISPLAYV3) 200008
Creating transient OpenGL context
000 wglCreateContextAttribsARB core found.
000 wglChoosePixelFormatARB core found.
000 wglSwapIntervalEXT core found.
000 wglGetExtensionsStringARB core found.
Creating definitive OpenGL context
000 wglCreateContextAttribsARB core found.
000 wglChoosePixelFormatARB core found.
000 wglSwapIntervalEXT core found.
000 wglGetExtensionsStringARB core found.
391 glReleaseShaderCompiler core found.
392 glShaderBinary core found.
393 glGetShaderPrecisionFormat core found.
394 glDepthRangef core found.
395 glClearDepthf core found.
396 glGetProgramBinary core found.
397 glProgramBinary core found.
398 glProgramParameteri core found.
399 glUseProgramStages core found.
400 glActiveShaderProgram core found.
401 glCreateShaderProgramv core found.
402 glBindProgramPipeline core found.
403 glDeleteProgramPipelines core found.
404 glGenProgramPipelines core found.
405 glIsProgramPipeline core found.
406 glGetProgramPipelineiv core found.
407 glProgramUniform1i core found.
408 glProgramUniform1iv core found.
409 glProgramUniform1f core found.
410 glProgramUniform1fv core found.
411 glProgramUniform1d core found.
412 glProgramUniform1dv core found.
413 glProgramUniform1ui core found.
414 glProgramUniform1uiv core found.
415 glProgramUniform2i core found.
416 glProgramUniform2iv core found.
417 glProgramUniform2f core found.
418 glProgramUniform2fv core found.
419 glProgramUniform2d core found.
420 glProgramUniform2dv core found.
421 glProgramUniform2ui core found.
422 glProgramUniform2uiv core found.
423 glProgramUniform3i core found.
424 glProgramUniform3iv core found.
425 glProgramUniform3f core found.
426 glProgramUniform3fv core found.
427 glProgramUniform3d core found.
428 glProgramUniform3dv core found.
429 glProgramUniform3ui core found.
430 glProgramUniform3uiv core found.
431 glProgramUniform4i core found.
432 glProgramUniform4iv core found.
433 glProgramUniform4f core found.
434 glProgramUniform4fv core found.
435 glProgramUniform4d core found.
436 glProgramUniform4dv core found.
437 glProgramUniform4ui core found.
438 glProgramUniform4uiv core found.
439 glProgramUniformMatrix2fv core found.
440 glProgramUniformMatrix3fv core found.
441 glProgramUniformMatrix4fv core found.
442 glProgramUniformMatrix2dv core found.
443 glProgramUniformMatrix3dv core found.
444 glProgramUniformMatrix4dv core found.
445 glProgramUniformMatrix2x3fv core found.
446 glProgramUniformMatrix3x2fv core found.
447 glProgramUniformMatrix2x4fv core found.
448 glProgramUniformMatrix4x2fv core found.
449 glProgramUniformMatrix3x4fv core found.
450 glProgramUniformMatrix4x3fv core found.
451 glProgramUniformMatrix2x3dv core found.
452 glProgramUniformMatrix3x2dv core found.
453 glProgramUniformMatrix2x4dv core found.
454 glProgramUniformMatrix4x2dv core found.
455 glProgramUniformMatrix3x4dv core found.
456 glProgramUniformMatrix4x3dv core found.
457 glValidateProgramPipeline core found.
458 glGetProgramPipelineInfoLog core found.
459 glVertexAttribL1d core found.
460 glVertexAttribL2d core found.
461 glVertexAttribL3d core found.
462 glVertexAttribL4d core found.
463 glVertexAttribL1dv core found.
464 glVertexAttribL2dv core found.
465 glVertexAttribL3dv core found.
466 glVertexAttribL4dv core found.
467 glVertexAttribLPointer core found.
468 glGetVertexAttribLdv core found.
469 glViewportArrayv core found.
470 glViewportIndexedf core found.
471 glViewportIndexedfv core found.
472 glScissorArrayv core found.
473 glScissorIndexed core found.
474 glScissorIndexedv core found.
475 glDepthRangeArrayv core found.
476 glDepthRangeIndexed core found.
477 glGetFloati_v core found.
478 glGetDoublei_v core found.
479 glDrawArraysInstancedBaseInstance core found.
480 glDrawElementsInstancedBaseInstance core found.
481 glDrawElementsInstancedBaseVertexBaseInstance core found.
482 glGetInternalformativ core found.
483 glGetActiveAtomicCounterBufferiv core found.
484 glBindImageTexture core found.
485 glMemoryBarrier core found.
486 glTexStorage1D core found.
487 glTexStorage2D core found.
488 glTexStorage3D core found.
489 glDrawTransformFeedbackInstanced core found.
490 glDrawTransformFeedbackStreamInstanced core found.
493 glDispatchCompute core found.
494 glDispatchComputeIndirect core found.
496 glFramebufferParameteri core found.
497 glGetFramebufferParameteriv core found.
498 glGetInternalformati64v core found.
503 glInvalidateFramebuffer core found.
504 glInvalidateSubFramebuffer core found.
505 glMultiDrawArraysIndirect core found.
506 glMultiDrawElementsIndirect core found.
507 glGetProgramInterfaceiv core found.
508 glGetProgramResourceIndex core found.
509 glGetProgramResourceName core found.
510 glGetProgramResourceiv core found.
511 glGetProgramResourceLocation core found.
512 glGetProgramResourceLocationIndex core found.
513 glShaderStorageBlockBinding core found.
514 glTexBufferRange core found.
515 glTexStorage2DMultisample core found.
516 glTexStorage3DMultisample core found.
518 glBindVertexBuffer core found.
519 glVertexAttribFormat core found.
520 glVertexAttribIFormat core found.
521 glVertexAttribLFormat core found.
522 glVertexAttribBinding core found.
523 glVertexBindingDivisor core found.
524 glDebugMessageControl core found.
525 glDebugMessageInsert core found.
526 glDebugMessageCallback core found.
527 glGetDebugMessageLog core found.
528 glPushDebugGroup core found.
529 glPopDebugGroup core found.
530 glObjectLabel core found.
531 glGetObjectLabel core found.
532 glObjectPtrLabel core found.
533 glGetObjectPtrLabel core found.
534 glBufferStorage core found.
sglDdrv_w32.c:820
543 glClipControlEXT ext found.
sglDdrv_w32.c:820
551 glNamedBufferStorageEXT ext found.
sglDdrv_w32.c:820
589 glTextureBufferRangeEXT ext found.
sglDdrv_w32.c:820
606 glTextureParameteriEXT ext found.
641 glMemoryBarrierByRegion core found.
sglDdrv_w32.c:820
644 glGetGraphicsResetStatusARB ext found.
sglDdrv_w32.c:820
645 glGetnCompressedTexImageARB ext found.
sglDdrv_w32.c:820
646 glGetnTexImageARB ext found.
sglDdrv_w32.c:820
647 glGetnUniformdvARB ext found.
sglDdrv_w32.c:820
648 glGetnUniformfvARB ext found.
sglDdrv_w32.c:820
649 glGetnUniformivARB ext found.
sglDdrv_w32.c:820
650 glGetnUniformuivARB ext found.
sglDdrv_w32.c:820
651 glReadnPixelsARB ext found.
sglDdrv_w32.c:2112
677 381 1920 1080 96 96 32 1 36 36 51 60 1 

 Opening the SIGMA GL/2 Drawing Execution Port 000
	Intel(R) HD Graphics 4.0.0 - Build 10.18.10.5161sglDdrv_w32.c:1806
API ERROR HIGH 1280 GL error GL_INVALID_ENUM
sglDdrv_w32.c:2271
GL: INVAL_PARAM
sglDdrv_w32.c:1806
API ERROR HIGH 1280 GL error GL_INVALID_ENUM
sglDdrv_w32.c:2297
GL: INVAL_PARAM
sglDdrv_w32.c:1806
API ERROR HIGH 1280 GL error GL_INVALID_ENUM
sglDdrv_w32.c:2307
GL: INVAL_PARAM
sglDdrv_w32.c:1806
API ERROR HIGH 1280 GL error GL_INVALID_ENUM
sglDdrv_w32.c:2309
GL: INVAL_PARAM
sglDdrv_w32.c:1806
API ERROR HIGH 1280 GL error GL_INVALID_ENUM
sglDdrv_w32.c:2313
GL: INVAL_PARAM
Loading file... <system/qwadro.xs>('E:\qwadro\afx\\system\/qwadro.xs')
//require "graphics" for Canvas, Color
//require "font" for Font
//require "io"
//require "qwadro" for FileSystem

class Stream {
    ffi firm OpenFile(uri, mode)
    ffi firm LoadFile(uri)
    ffi ReloadFile(uri)
    ffi Acquire(mode, siz)
    ffi Open(mode, cap, src, len)
    ffi OpenInput(cap, src, len)
    ffi OpenOutput(cap, dst, len)
    ffi Close()
    
    ffi Seek(offset, origin)
    ffi Read(dst, range, rate)
    ffi Write(src, range, rate)
}

class FileSystem {
    ffi firm Mount(point, location, mode)
    ffi firm Dismount(point, location, mode)
}

class Keyboard {
    ffi firm Reacquire(port)
    ffi firm Release(port)
    
    ffi firm KeyIsPressed(port, code)
}

class Mouse {
    ffi firm Reacquire(port)
    ffi firm Release(port)
    
    ffi firm LmbIsPressed(port)
    ffi firm RmbIsPressed(port)
    
    ffi firm GetMotionX(port)
    ffi firm GetMotionY(port)
    ffi firm GetWheelDelta(port)
}

class Main {
  construct new() {
    System.print("new")
  }

  once() {
    System.print("init")
    //FileSystem.Mount("tmp", "system/tmp", "rwx")
    var f = Stream.OpenFile("tmp/camera.lua", "rwx")
    f.Seek(10, 0)
    f.Write("stdout", 6, 0)
    f.Close()
  }

  update() {
    System.print("update")
  }

  draw(dt) {
    System.print("draw")
  }
  

}

FileSystem.Mount("code", "code", "rx")
FileSystem.Mount("sound", "sound", "rx")
FileSystem.Mount("data", "data", "rx")
FileSystem.Mount("art", "art", "rx")
FileSystem.Mount("tmp", "tmp", "rwx")

var Game = Main.new()
System.print(".")
//var file = Stream.OpenFile("tmp/camera.lua", "rwx")
//file.Seek(1, 0)
Mounting file system... <code>('E:\qwadro\afx\\code\'),6
Mounting file system... <sound>('E:\qwadro\afx\\sound\'),6
Mounting file system... <data>('E:\qwadro\afx\\data\'),6
Mounting file system... <art>('E:\qwadro\afx\\art\'),6
Mounting file system... <tmp>('E:\qwadro\afx\\tmp\'),6
new
.
init
Opening file... <tmp/camera.lua>('E:\qwadro\afx\\tmp\/camera.lua'),6
